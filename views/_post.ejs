<link rel="stylesheet" href="/css/_post.css">
<li class="post-li" id="post-<%= post._id%>">
    
    <div class="post">
        <div class="head">
            <div class="profile">
                <div class="img">
                    <img src="<%= post.user.avatar ? post.user.avatar : '/img/default_avatar.png'%>" alt="">
                </div>
                <div class="profile-data">
                    <span><%= post.user.name%></span>
                    <span class="date"><%=post.updatedAt%></span>
                </div>
            </div>
            <%if(locals.user && locals.user.id === post.user.id){%>
                <a class="delete-post-button" href="/posts/destroy/<%=post._id%>"><i class="bi bi-x-circle" style="color: black"></i></a>
            <%}%>
            </div>
        <p>
            <%= post.content %>

        </p>
        <div class="foot">
            <small>
                <% if (locals.user){ %>
                        <a class="toggle-like-button" data-likes="<%= post.likes.length %>" href="/likes/toggle/?id=<%=post._id%>&type=Post" style="color: blue; text-decoration: none ;">
                                <%= post.likes.length %> <i class="bi bi-hand-thumbs-up-fill"></i>
                        </a>
                <% }else{ %>
                    <%= post.likes.length %> <i class="bi bi-hand-thumbs-up-fill"></i>
                <% } %>
            </small>
            <button class='comment-btn'>Comments</button>
        </div>
    </div>
    <div class="post-comments">
        <%if(locals.user){%>
        <form action="/comments/create" method="post" id="new-comment-form-<%= post._id%>">
            <input type="text" name="content" placeholder="comment..." class="inp" required>
            <input type="hidden" name="post" value="<%= post._id%>">
            <input type="submit" value="comment">
        </form>
        <%}%>
        <div class="comment-list-container">
            <ul id="post-comments-<%= post._id %>">
                <% for(comment of post.comments){%>
                    <%- include('_comment')%>
                <%}%>
            </ul>
        </div>
    </div>
</li>
